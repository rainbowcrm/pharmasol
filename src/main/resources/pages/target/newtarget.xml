<?xml version="1.0" encoding="UTF-8"?>
<Page id="newTarget" showinFrame="true" title="Target | Primus WFM | Primus WFM"
      Object="com.primus.crm.target.model.Target"
      Controller="com.primus.crm.target.controller.TargetController">
    <Template type="Transaction" name="TransactionTemplate"></Template>
    <Forwards>
        <Forward key="CANCEL">controller?page=targets</Forward>
        <Forward key="SAVE">targets</Forward>
    </Forwards>
    <IncludeJS>./js/CRMGeneral.js</IncludeJS>
    <IncludeJS>./js/RadsLib.js</IncludeJS>
    <AjaxGroups>
        <AjaxGroup service="regionLocationSearch">
            <requestElements>
                <requestElement key="region">LstRegion</requestElement>
            </requestElements>
            <responseElements>
                <responseElement key="location">LstLocations</responseElement>
            </responseElements>
        </AjaxGroup>
    </AjaxGroups>
    <Elements>
        <UIForm Id="cust" method="POST">
            <CoreSection>
                <ErrorSection>
                </ErrorSection>
                <Section type="header">
                    <Element label="" type="UIHidden" Id="hdnVersion" property="version"/>
                    <Element label="" type="UIHidden" Id="hdnUserID" property="Id"/>

                    <Element label="Region" type="UIList" Id="LstRegion" property="location.region.id">
                        <options populator="getAllRegions">
                        </options>
                    </Element>
                    <Element label="Location" type="UIList" Id="LstLocations" property="location.id">
                        <options populator="getAllLocations">
                        </options>
                    </Element>
                    <Element label="From" type="UIDate" isMandatory="true" Id="txtfromDate" property="fromDate"/>
                    <Element label="To" type="UIDate" isMandatory="true" Id="txttoDate" property="toDate"/>
                    <Element label="Period" type="UIText" isMandatory="true" Id="txtperiod" property="period"/>
                    <Element label="Manager" type="UILookupDataList" listId="lstmanager" Id="txtmanager"
                             isMandatory="true" property="manager.name">
                        <lookupType>user</lookupType>
                    </Element>
                    <Element label="Description" type="UIText" isMandatory="false" Id="txtdescription"
                             property="description"/>


                </Section>

                <Section type="detailForSale">
                    <Element type="UITabset" Id="impexp" style="uitabstyle"
                             selectedTabStyle="titleStyleSelected active nav-link"
                             unSelectedTabStyle="titleStyleUnSelected nav-link">
                    <Element type="UITab" Id="idEmployeDetails" title="Agent_Targets" showinTable="false">
                    <Element type="UITable" rows="1" cols="10" style="grid" applyStyleonChildren="true" Id="tblTrans"
                             property="agentVisitTargets[]">
                        <Element type="UITableHead" style="listPageTitle">
                            <Element type="UITableRow">
                                <Element type="UITableCol" width="20%">
                                    <Element label="" type="UILabel" Id="lblCode" value="Agent"/>
                                </Element>

                                <Element type="UITableCol" width="20%">
                                    <Element label="" type="UILabel" Id="lblCode" value="Visit_Entity"/>
                                </Element>
                                <Element type="UITableCol" width="35%">
                                    <Element label="" type="UILabel" Id="lblCode" value="Visit_To"/>
                                </Element>

                                <Element type="UITableCol" width="35%">
                                    <Element label="" type="UILabel" Id="lblCode" value="Target"/>
                                </Element>
                                <Element type="UITableCol" width="35%">
                                    <Element label="" type="UILabel" Id="lblCode" value="Description"/>
                                </Element>
                            </Element>
                        </Element>

                        <Element type="UITableRow" dataType="Target" rendered="!Object.isDeleted">
                            <Element type="UITableCol" width="20%">
                                <Element label="" type="UILookupDataList" listId="lstagent" Id="txtagent"
                                         isMandatory="true" property="agent.name">
                                    <lookupType>user</lookupType>
                                </Element>
                                <Element label="" type="UIHidden" isMandatory="false" Id="txtAgentlineNumber"
                                         property="lineNumber"/>
                            </Element>

                            <Element type="UITableCol" width="20%">
                                <Element label="" type="UIList" isMandatory="true" Id="lstAgentTrgtvisitingType"
                                         property="visitingType.code">
                                    <options populator="getFiniteValues" populatorParam="VSTTRGT">
                                    </options>
                                </Element>
                            </Element>
                            <Element type="UITableCol" width="35%">
                                <Element label="" type="UILookupDataList" listId="lstAgentTrgtvisitingEntity"
                                         Id="txtAgentTgtvisitingEntity"   additionalInputControl = "lstAgentTrgtvisitingType"
                                         property="visitingEntity">
                                    <lookupType>externalParty</lookupType>
                                </Element>
                            </Element>

                            <Element type="UITableCol" width="35%">
                                <Element label="" type="UIText" isMandatory="false" Id="txtAgentTrgttargettedVisit"
                                         property="targettedVisit"/>
                            </Element>
                            <Element type="UITableCol" width="35%">
                                <Element label="" type="UIText" isMandatory="false" Id="txtAgentTrgtdescription"
                                         property="description"/>
                            </Element>
                            <Element type="UITableCol" width="10%">
                                <Element label="" type="UIHidden" Id="hdnsplitlineNo" property="id"/>
                                <Element label="" type="UIHidden" Id="hdnsplitlineversion" property="version"/>
                                <Element caption="" style="btn btn-primary" iconStyle="glyphicon glyphicon-plus"
                                         type="UIButton" Id="btnAddRow" fixedAction="FixedAction.ACTION_ADDTABLEROW"
                                         fixedActionParam="this"/>
                                <Element caption="" style="btn btn-danger" iconStyle="glyphicon glyphicon-minus"
                                         type="UIButton" Id="btnDelRow" fixedAction="FixedAction.ACTION_DELETETABLEROW"
                                         fixedActionParam="this"/>
                            </Element>
                        </Element>


                    </Element>
                    </Element>
                    <Element type="UITab" Id="idCompoSDetails" title="Total_Targets" showinTable="false">

                    <Element type="UITable" rows="1" cols="9" style="grid" applyStyleonChildren="true" Id="tblTrans"
                             property="totalVisitTargets[]">
                        <Element type="UITableHead" style="listPageTitle">
                            <Element type="UITableRow">


                                <Element type="UITableCol" width="20%">
                                    <Element label="" type="UILabel" Id="lblCode" value="Visit_Entity"/>
                                </Element>
                                <Element type="UITableCol" width="35%">
                                    <Element label="" type="UILabel" Id="lblCode" value="Visit_To"/>
                                </Element>


                                <Element type="UITableCol" width="35%">
                                    <Element label="" type="UILabel" Id="lblCode" value="Target"/>
                                </Element>
                                <Element type="UITableCol" width="35%">
                                    <Element label="" type="UILabel" Id="lblCode" value="Description"/>
                                </Element>
                            </Element>
                        </Element>

                        <Element type="UITableRow" dataType="Target" rendered="!Object.isDeleted">

                            <Element type="UITableCol" width="20%">
                                <Element label="" type="UIList" isMandatory="true" Id="lstvisitingType"
                                         property="visitingType.code">
                                    <options populator="getFiniteValues" populatorParam="VSTTRGT">
                                    </options>
                                </Element>
                                <Element label="null" type="UIHidden" isMandatory="false" Id="txtlineNumber"
                                         property="lineNumber"/>
                            </Element>
                            <Element type="UITableCol" width="35%">
                                <Element label="" type="UILookupDataList" listId="lstvisitingEntity"
                                         Id="txtvisitingEntity" isMandatory="true" additionalInputControl="lstvisitingType"
                                         property="visitingEntity">
                                    <lookupType>visitingEntity</lookupType>
                                </Element>
                            </Element>

                            <Element type="UITableCol" width="35%">
                                <Element label="" type="UIText" isMandatory="false" Id="txttargettedVisit"
                                         property="targettedVisit"/>
                            </Element>
                            <Element type="UITableCol" width="35%">
                                <Element label="" type="UIText" isMandatory="false" Id="txtdescription"
                                         property="description"/>
                            </Element>
                            <Element type="UITableCol" width="10%">
                                <Element label="" type="UIHidden" Id="hdnsplitlineNo" property="id"/>
                                <Element label="" type="UIHidden" Id="hdnsplitlineversion" property="version"/>
                                <Element caption="" style="btn btn-primary" iconStyle="glyphicon glyphicon-plus"
                                         type="UIButton" Id="btnAddRow" fixedAction="FixedAction.ACTION_ADDTABLEROW"
                                         fixedActionParam="this"/>
                                <Element caption="" style="btn btn-danger" iconStyle="glyphicon glyphicon-minus"
                                         type="UIButton" Id="btnDelRow" fixedAction="FixedAction.ACTION_DELETETABLEROW"
                                         fixedActionParam="this"/>
                            </Element>
                        </Element>


                    </Element>

                    </Element>
                    </Element>
                </Section>
            </CoreSection>
            <Section type="summary">
            </Section>

        </UIForm>
    </Elements>
</Page>