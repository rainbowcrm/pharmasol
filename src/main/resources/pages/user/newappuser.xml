<?xml version="1.0" encoding="UTF-8"?>
<Page id = "UserCRUD" showinFrame ="true" title ="New User | Rainbow CRM" Object = "com.primus.common.user.model.User"
      Controller = "com.primus.common.user.controller.UserController">
    <Template type= "Transaction"  name = "TransactionTemplate"></Template>
    <Forwards>
        <Forward key ="CANCEL">controller?page=appusers</Forward>
        <Forward key ="SAVE">appusers</Forward>
    </Forwards>

    <AjaxGroups>
        <AjaxGroup service ="companySearchUsrCreate">
            <requestElements>
                <requestElement key = "companyName">txtCompany</requestElement>
            </requestElements>
            <responseElements>
                <responseElement key = "userNameSuffix" >lblsuffix</responseElement>
            </responseElements>
        </AjaxGroup>
    </AjaxGroups>
    <IncludeJS>./scripts/user/User.js</IncludeJS>
    <IncludeJS>./js/CRMGeneral.js</IncludeJS>
    <IncludeJS>./js/RadsLib.js</IncludeJS>
    <Elements>
        <UIForm Id ="cust" method = "POST" enctype="multipart/form-data" >
            <CoreSection>
                <ErrorSection>
                </ErrorSection>
                <Section type ="header">
                    <Element type="UITabset" Id="impexp" style="uitabstyle"
                             selectedTabStyle="titleStyleSelected active nav-link"
                             unSelectedTabStyle="titleStyleUnSelected nav-link">
                    <Element type="UITab" Id="idPreferredTim" title="Basic_Info" cols="3" showinTable="true">

                    <Element label = "" type = "UIHidden" Id = "hdnVersion" property ="version" />
                    <Element label = ""  type = "UIHidden" Id = "hdnCompany" style ="bolded"   size="10" property ="Company.Name" />
                    <Element label = ""  type = "UIHidden" Id = "hdnUserID" style ="bolded"   size="10" property ="UserId" />
       <!--             <If check  = "Controller.isCreateMode" >
                        <Element label = "Company"   type = "UILookupDataList"  listId="lstcompanylistings" Id = "txtCompany"  isMandatory="true" property ="Company.Name"  showLookupAsDialog="true"
                                 dialogId="dlgComp"  dialogStyle ="dialogStyle" frameStyle="lookupFrameStyle" >
                            <lookupType>company</lookupType>
                            <height>300</height>
                            <width>290</width>
                        </Element>
                    </If>-->


                    <Element label = ""  type = "UIHidden" Id = "txthdnCompany" isMandatory="true" size="30" property ="Company.Name" />
                    <If check  = "Controller.isUpdateMode" >
                        <Element label = "User_Id"  type = "UILabel" Id = "lblCompany" style="crudlabel"  size="10" property ="UserId" externalise="false" />
                    </If>
                    <If check  = "Controller.isCreateMode" >
                        <Element label = "User_Id"  type = "UIText" Id = "txtCode"  isMandatory="true" size="10" property ="Prefix" />
                        <Element label = ""  type = "UILabel" Id = "lblsuffix" style ="bolded" generatedValue="Controller.getSuffix" showInPrevCol="true" size="10"  />
                    </If>
                    <!--  <If check  = "Controller.isUpdateMode" >
                          <Element label = "User_Id"  type = "UILabel" Id = "txtCode" style ="bolded"   size="10" property ="UserId" />
                      </If>-->
                    <Element label = "Photo" type = "UIFileUpload" Id = "txtPhoto3" property ="image" maxSize="30720"
                             multiple ="false"  fileNameProperty="fileName"   onChangeJS ="readURL(this,'idIMG3')" accept= ".png, .jpg, .jpeg, .gif"  />
                    <Element label = ""  type = "UIImage" Id = "idIMG3"  height = "200" weight ="200" src= "#" property ="fileWithLink" />
                    <Element label = ""  type = "UIHidden" Id = "idHdnGFileWithLink"   property ="fileWithLink" />
                    <Element label = ""  type = "UIHidden" Id = "idHdnGFileWithoutLink"   property ="fileWithoutLink" />

                    <Element label = "Division"   type = "UILookupDataList"  listId="lstdivisionlistings" Id = "txtDivision"   property ="Division.Name"  showLookupAsDialog="true"
                             dialogId="dlgComp"  dialogStyle ="dialogStyle" frameStyle="lookupFrameStyle" >
                        <lookupType>division</lookupType>
                        <height>300</height>
                        <width>290</width>
                    </Element>
                    <Element label = "Manager"   type = "UILookupDataList"  listId="lstmgrUsers" Id = "txtmgrUser"  isMandatory="true" property ="managerUser.userId"
                             showLookupAsDialog="true"
                             dialogId="dlgComp"  dialogStyle ="dialogStyle" frameStyle="lookupFrameStyle" >
                        <lookupType>user</lookupType>
                        <height>300</height>
                        <width>290</width>
                    </Element>
                    <Element label = "First_Name"  type = "UIText" Id = "txtFirstName" isMandatory="true" size="30" property ="FirstName" />
                    <Element label = "Last_Name"  type = "UIText" Id = "txtLastName" isMandatory="true" size="30" property ="LastName" />
                    <Element label = "Password"  type = "UIPassword" Id = "txtPwd" isMandatory="true" size="30" property ="Password" />
                    <Element label = "Confirm_Password"  type = "UIPassword" Id = "txtconf" size="30" property ="Password" />
                    <Element label = "Address1"  type = "UIText" Id = "txtAdd1" size="30" property ="Address1" />
                    <Element label = "Address2"  type = "UIText" Id = "txtAdd2" size="30" property ="Address2" />
                    <Element label = "City"  type = "UIText" Id = "txtCity" size="30"  property ="City" />
                    <Element label = "Zipcode"  type = "UIText" Id = "txtPinCode" size="7" property ="ZipCode" />
                    <Element label = "Email"  type = "UIText" Id = "txtemail" size="30" isMandatory="true" property ="Email" />
                    <Element label = "Phone"  type = "UIText" Id = "txtPhone" size="30" isMandatory="true" property ="Phone" />
                    <Element label = "Role"  type = "UIList" Id = "lstRole"  isMandatory="true"  property ="Role.Id"  externalise= "true">
                        <options populator =  "Controller.getRoles">
                        </options>
                    </Element>
                    <Element label="Gmail_Id" type="UIText" isMandatory="false" Id="txtgmailId"
                             property="gmailId"/>
                    <Element label="Facebook_Id" type="UIText" isMandatory="false" Id="txtfacebookId"
                             property="faceBookId"/>
                    <!--<Element label="All_Region_Access" type="UIBooleanCheckBox" hiddenControlId="hdnlnksunday"
                             Id="txtlinksunday" property="allowAllRegionAccess"/>

                    <Element label = "RegionsAccess"  type = "UIList" Id = "lstAccessiblleRegions"  multiple ="true" property ="selectedRegions"  externalise= "true">
                        <options populator =  "getAllRegions">
                        </options>
                    </Element>-->
                    </Element>
                    <Element type="UITab" Id="idEmployeDetails" title="Access_Details" cols ="4" showinTable="true">
                        <Element label="Access_Range" type="UIList" isMandatory="false" Id="lstSpecial"
                                 property="userPortfolio.accessLevel.code">
                            <options populator="getFiniteValuesWithSelect" populatorParam="USACCESS">
                            </options>
                        </Element>

                        <Element label="Zone" type="UIList"  Id="LstZone"   property="userPortfolio.zone.id">
                            <options populator="getAllZones" >
                            </options>
                        </Element>
                        <Element label="Region" type="UIList"  Id="LstRegion"   property="userPortfolio.region.id">
                            <options populator="getAllRegions" >
                            </options>
                        </Element>
                        <Element label="Location" type="UIList"  Id="LstLocations"   property="userPortfolio.location.id">
                            <options populator="getAllLocations" >
                            </options>
                        </Element>


                    </Element>
                    </Element>




                </Section>
            </CoreSection>
            <Section type ="summary">
            </Section>

        </UIForm>
    </Elements>
</Page>