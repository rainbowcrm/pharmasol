package com.primus.crm.target.dao;

import com.primus.abstracts.AbstractDAO;
import com.primus.abstracts.PrimusModel;
import com.techtrade.rads.framework.utils.Utils;
import org.springframework.stereotype.Component;
import com.primus.crm.target.model.Target;

import javax.persistence.Query;
import java.util.Date;
import java.util.List;

/**
** Class Generated by Primus Auto code generator
**/
@Component
public class TargetDAO extends AbstractDAO{

  @Override
    public String getEntityClassName() {
        return  "Target";
    }

    @Override
    public Class getEntityClass() {
        return  Target.class;
    }


    public Target getTargetforDate(int location , Date evalDate , int companyId)
    {
        Query query = em.createQuery("from  Target target where location.id = :location  and company.id = :company and " +
                "  deleted =false and target.fromDate <= :evalDate and  target.toDate >=   :evalDate");
        query.setParameter("location", location);
        query.setParameter("company", companyId);
        query.setParameter("evalDate", evalDate);
        List<Target> ans = query.getResultList();
        if(!Utils.isNullList(ans))
            return ans.get(0);
        else
            return null;
    }
}

